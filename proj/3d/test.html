<HTML><body>
<script>
function drw(l,c,p1,p2,p3){var old=cont.innerHTML;cont.innerHTML=old.replace("l"+l,'\<polygon points="'+p1[0]+","+p1[1]+" "+p2[0]+","+p2[1]+" "+p3[0]+","+p3[1]+'" fill="'+c+'" \>\</polygon\>l'+l)};
function g2d(x,y,z){var m=500/(z*2+1);var X=x*m;var Y=y*m;return [250+X,250-Y]};
function trg(p1,p2,p3,c){var l=Math.round((p1[2]+p2[2]+p3[2])/3);drw(l,c,g2d(p1[0],p1[1],p1[2]),g2d(p2[0],p2[1],p2[2]),g2d(p3[0],p3[1],p3[2]))};
var pi=3.141592;
function sin(a){return Math.sin(a/180*pi)};
function asin(a){return (Math.asin(a)/pi*180)};
function rot2d(r,p,a){var zx=p[0];var zy=p[1];while(a<0){a+=360};a=a%360;var q=0;while(!(a<90)){a-=90;q++};var x=0;var y=0; if(a!=0){y=sin(a)*r;x=r-Math.sqrt((r*r)-(y*y))};
var X,Y;
if(q==0){X=x;Y=y};
if(q==1){X=r+y;Y=r-x};
if(q==2){X=2*r-x;Y=-y};
if(q==3){X=r-y;Y=x-r};
return [zx+X,zy+Y];
}
function grot2d(p,s){var X=p[0]; var Y=p[1];var sx=s[0];var sy=s[1];var dx=X-sx;var dy=Y-sy;
var r=Math.sqrt((dy*dy)+(dx*dx));var q;
/*if(dx<0&&dy>0){q=0};
if(dx>0&&dy>0){q=1};
if(dx>0&&dy<0){q=2};
if(dx<0&&dy<0){q=3};*/
var x=0;var y=0;
if(dx<0){
if(dy<0){q=3;y=-dx}else{q=0;y=dy}
}else{
if(dy<0){q=2;y=-dy}else{q=1;y=dx}
};
var a=asin(y/r);
while(q!=0){a+=90;q--};
return a
}
</script>
<div id="out">
<svg height="500" width="500" style="background:#ccccff">
<g l="2">
l2
</g>
<g l="1">
l1
</g>
<g>
l0
</g>
</svg>
</div>
<script>
var cont=document.getElementById("out");
drw(1,"red",[0,0],[50,0],[50,50]);
//alert(g2d(-0.5,0.5,2));
trg([-0.5,0.5,0],[-0.5,0.5,1],[-0.5,-0.5,1],"red");
//alert(rot2d(1,[-1,0],225));
//alert(sin(10));
alert(grot2d([-1,1],[1,-1]));
</script>
</body>
</HTML>
